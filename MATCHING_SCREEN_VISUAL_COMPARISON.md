# マッチング画面統一 - ビジュアル比較

## 変更前の問題点

### 親ユーザー（子を探す）の画面
```
┌─────────────────────────────────────────────────┐
│ 子を探す                                        │
├──────────────┬──────────────────────────────────┤
│ 探している子ども│ マッチした子                    │
│              │                                  │
│ 小室かれん    │ 📷 小室かれん                   │
│ 女の子・2歳   │ 女の子・2歳                     │
│ 出身地: 埼玉県 │ 生年月日: 2023年1月27日         │
│              │ 出身地: 埼玉県 さいたま市         │
│              │                                  │
│              │ ┌────────────────┐              │
│              │ │  100%  ⓘ    │              │
│              │ │  類似度      │              │
│              │ │  非常に高い  │              │
│              │ │ ━━━━━━━━━━ │              │
│              │ │ [メッセージへ] │              │
│              │ └────────────────┘              │
└──────────────┴──────────────────────────────────┘
```
✅ **良いレイアウト**: 探している子どもとマッチが明確に表示

### 子ユーザー（親を探す）の画面 - 変更前
```
┌─────────────────────────────────────────────────┐
│ 親を探す                                        │
│ 1件のマッチが見つかりました                      │
├─────────────────────────────────────────────────┤
│                                                 │
│ 📷 小室進之介                                   │
│ 男性・38歳                                      │
│                                                 │
│ 生年月日：1987年10月7日                         │
│                                                 │
│ 初めまして！                                    │
│                                                 │
│ この方が探している子ども:                        │
│ ┌─────────────────────────────────────┐        │
│ │ 小室かれん                              │        │
│ │ 出身地: 埼玉県 さいたま市               │        │
│ └─────────────────────────────────────┘        │
│                                                 │
│                           ┌────────────────┐   │
│                           │  92%  ⓘ      │   │
│                           │  類似度        │   │
│                           │  非常に高い    │   │
│                           │ ━━━━━━━━━━   │   │
│                           │ [メッセージへ] │   │
│                           └────────────────┘   │
└─────────────────────────────────────────────────┘
```
❌ **問題点**: 
- 探している親の情報が表示されない
- 親ユーザーの画面とレイアウトが異なる
- 一貫性がない

## 変更後の統一画面

### 子ユーザー（親を探す）- 変更後
```
┌─────────────────────────────────────────────────┐
│ 親を探す                                        │
├──────────────┬──────────────────────────────────┤
│ 探している親  │ マッチした親                     │
│              │                                  │
│ 小室かれん    │ 📷 小室進之介                   │
│ 男性・38歳   │ 男性・38歳                      │
│ 出身地: 埼玉県 │ 生年月日: 1987年10月7日         │
│              │ 出身地: 埼玉県                   │
│              │                                  │
│              │ 初めまして！                     │
│              │                                  │
│              │ この方が探している子ども:         │
│              │ ┌──────────────┐              │
│              │ │ 小室かれん      │              │
│              │ │ 出身地: 埼玉県  │              │
│              │ └──────────────┘              │
│              │                                  │
│              │ ┌────────────────┐              │
│              │ │  92%  ⓘ      │              │
│              │ │  類似度        │              │
│              │ │  非常に高い    │              │
│              │ │ ━━━━━━━━━━   │              │
│              │ │ [メッセージへ] │              │
│              │ └────────────────┘              │
└──────────────┴──────────────────────────────────┘
```
✅ **改善点**:
- 探している親の情報が左側に表示される
- 親ユーザーと同じレイアウト構造
- 一貫性のある体験

## 実装のメリット

### 1. ユーザー体験の向上
- どちらのロールでも同じ操作方法
- 学習コストの削減
- 直感的な画面構成

### 2. 開発・保守の効率化
- 単一のコンポーネントで両方のロールをサポート
- バグ修正が一箇所で済む
- 新機能の追加が容易

### 3. コードの品質向上
- 約150行のコード削減
- 重複ロジックの削除
- テストのカバレッジ向上

## 技術的な実装詳細

### データベース設計の活用
`target_people` テーブルは両方の用途で使用:
- `user_id` が親の場合 → 探している子どもの情報
- `user_id` が子の場合 → 探している親の情報

### 動的なラベル表示
```typescript
// ユーザーロールに応じてラベルを動的に変更
{userRole === 'parent' ? '探している子ども' : '探している親'}

// マッチ候補も動的に取得
const childMatches = userRole === 'parent' 
  ? (groupedMatches['child'] || [])
  : (groupedMatches['parent'] || []);
```

### エッジケースの処理
探している子ども/親が未登録の場合:
```
┌─────────────────────────────────────────────┐
│ 📝                                          │
│ 探している[子ども/親]を登録してください      │
│                                             │
│ 探している[子ども/親]の情報を登録すると、    │
│ マッチングが表示されます                    │
│                                             │
│ [プロフィールを編集]                        │
└─────────────────────────────────────────────┘
```

## まとめ

この変更により:
1. ✅ UIの一貫性が向上
2. ✅ ユーザー体験が改善
3. ✅ コードの保守性が向上
4. ✅ 将来の拡張が容易に

親/子どちらのユーザーも同じ高品質な体験を享受できるようになりました。
