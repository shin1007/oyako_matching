# プロジェクト概要

## 親子マッチング - 親子の再会を支援するプラットフォーム

### プロジェクト目的

親子断絶・実子誘拐後の再会を支援するマッチングプラットフォームです。AIとマイナンバーカード認証による厳格な本人確認で、安全かつ確実な親子の再会をサポートします。

## 主要機能

### 1. ユーザー管理
- **2つのユーザータイプ**
  - 親（月額¥1,000）: 離別した子どもを探す
  - 子ども（無料）: 自ら親を探す12歳以上

### 2. 認証・本人確認
- **マイナンバーカード認証**（xID API）
  - 厳格な本人確認
  - 氏名と生年月日の取得
  - 子どもの年齢確認（12歳以上）
- **Passkeys対応**
- **メールアドレス認証**

### 3. AIマッチング
- **マッチング機能**
  - 生年月日による絞り込み
  - プロフィール情報によるマッチング

### 4. メッセージング
- マッチング承認後に利用可能
- 安全な非公開メッセージ
- 既読機能

### 5. 決済（Stripe）
- 月額¥1,000のサブスクリプション
- クレジットカード決済
- Webhook による自動更新

### 6. AI機能
- **成長写真生成**（DALL-E 3）
  - 子どもの現在の姿を推測
  - 親の希望に応じた画像生成
- **コンテンツモデレーション**
  - 不適切なコンテンツの自動検出
  - ストーカー規制法への対応

## 技術スタック

### フロントエンド
- **Next.js 15** - App Router
- **TypeScript** - 型安全性
- **Tailwind CSS** - スタイリング

### バックエンド
- **Supabase**
  - PostgreSQL（データベース）
  - Auth（認証）
  - Row Level Security（RLS）
  - pgvector（ベクトル検索）

### 外部API
- **xID API** - マイナンバーカード認証
- **Stripe** - サブスクリプション決済
- **OpenAI API**
  - Moderation API（コンテンツモデレーション）
  - DALL-E 3（AI成長写真）

## データベース構造

### 主要テーブル
1. **users** - ユーザー基本情報
2. **profiles** - プロフィール
3. **matches** - マッチング関係
4. **messages** - メッセージ
5. **subscriptions** - サブスクリプション情報

### セキュリティ
- **Row Level Security (RLS)** で各ユーザーは自分のデータのみアクセス可能
- マッチング承認後のみメッセージ可能
- 非公開照合でプライバシー保護

## ページ構成

### パブリック
- `/` - ランディングページ
- `/auth/login` - ログイン
- `/auth/register` - 新規登録
- `/auth/verification` - 本人確認

### 認証後
- `/dashboard` - ダッシュボード
- `/dashboard/profile` - プロフィール管理
- `/dashboard/growth-photos` - AI成長写真（親のみ）
- `/matching` - マッチング検索
- `/messages` - メッセージ一覧
- `/messages/[id]` - 個別メッセージ
- `/payments/subscribe` - サブスクリプション登録（親のみ）
- `/payments/manage` - サブスクリプション管理

### API
- `/api/auth/verify/*` - xID認証
- `/api/matching/*` - マッチング機能
- `/api/openai/*` - AI機能
- `/api/stripe/*` - 決済処理

## コンプライアンス

### 法令対応
- **ストーカー規制法**
  - 非公開照合
  - 拒否・ブロック機能
  - 一方的なコンタクト防止
- **個人情報保護法**
  - 必要最小限の情報のみ取得
  - 適切なデータ管理
  - データ削除機能
- **特定商取引法**
  - 事業者情報の明示
  - 返金ポリシー

### セキュリティ対策
- HTTPS通信
- パスワードハッシュ化
- CSRF対策
- XSS対策
- SQL injection対策（RLS使用）

## 料金体系

### 親アカウント
- **月額¥1,000**
- マッチング機能
- メッセージ機能
- AI成長写真生成

### 子アカウント
- **完全無料**
- マッチング機能
- メッセージ機能

## 開発状況

### ✅ 完了
- プロジェクトセットアップ
- データベース設計・実装
- 認証システム
- マッチングシステム
- メッセージング機能
- 決済システム
- AI機能統合
- UI/UX実装
- セキュリティ実装
- ドキュメント作成

### 🔄 今後の拡張
- ビデオ通話機能
- AIカウンセリング
- コミュニティフォーラム
- モバイルアプリ
- 多言語対応

## デプロイ

### 推奨環境
- **Vercel** - Next.jsホスティング
- **Supabase** - データベース・認証
- **Stripe** - 決済処理
- **OpenAI** - AI機能

### デプロイ手順
詳細は [SETUP.md](./SETUP.md) と [DEPLOYMENT_CHECKLIST.md](./DEPLOYMENT_CHECKLIST.md) を参照してください。

## サポート

### ドキュメント
- [README.md](./README.md) - プロジェクト概要
- [SETUP.md](./SETUP.md) - セットアップガイド
- [ARCHITECTURE.md](./ARCHITECTURE.md) - アーキテクチャ
- [DEPLOYMENT_CHECKLIST.md](./DEPLOYMENT_CHECKLIST.md) - デプロイチェックリスト
- [CONTRIBUTING.md](./CONTRIBUTING.md) - 開発ガイド

### お問い合わせ
- GitHub Issues
- GitHub Discussions

## ライセンス

Private License

---

**親子の絆を取り戻すために。**
